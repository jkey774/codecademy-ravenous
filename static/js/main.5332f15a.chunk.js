(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(44)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},39:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),c=a.n(s),o=a(4),i=a(5),l=a(7),u=a(6),h=a(1),m=a(8),p=a(2),d=(a(31),function(){return r.a.createElement("div",{className:"NavBar"},r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"navbar"},r.a.createElement("span",{className:"navbar-brand mb-0 h1"},"Ravenous"))))}),f=(a(32),"SET_SEARCH_TERM"),E="SET_SEARCH_LOCATION",v="SET_SEARCH_SORT_BY",b="SET_SEARCH_RESULTS",g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleTermChange=function(e){a.setState({term:e.target.value})},a.handleLocationChange=function(e){a.setState({location:e.target.value})},a.state={term:"",location:""},a.sortByOptions={"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count"},a.errorMessages={termError:"Please enter a search term.",locationError:"Please enter a location"},a.handleSearch=a.handleSearch.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSortByChange",value:function(e){this.props.setSearchSortBy(e),this.props.searchSuccess&&this.validateSearch()&&this.props.searchYelp(this.state.term,this.state.location,e,0)}},{key:"handleSearch",value:function(e){e.preventDefault(),this.validateSearch()&&(this.props.searchYelp(this.state.term,this.state.location,this.props.sortBy),this.props.setSearchTerm(this.state.term),this.props.setSearchLocation(this.state.location))}},{key:"validateSearch",value:function(){var e="",t="";return""===this.state.term&&(e=this.errorMessages.termError),""===this.state.location&&(t=this.errorMessages.locationError),this.setState({termError:e,locationError:t}),!e&&!t}},{key:"getSortByClass",value:function(e){var t="btn btn-secondary";return t+=this.props.sortBy===e?" active":""}},{key:"renderSortByOptions",value:function(){var e=this;return Object.keys(this.sortByOptions).map(function(t){var a=e.sortByOptions[t];return r.a.createElement("li",{key:a,className:e.getSortByClass(a),onClick:e.handleSortByChange.bind(e,a)},t)})}},{key:"renderError",value:function(e){return e?r.a.createElement("div",{className:"error-label"},e):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("div",null,r.a.createElement("ul",{className:"SearchBar-sort-options",role:"group","aria-label":"sort by"},this.renderSortByOptions()),r.a.createElement("form",{onSubmit:this.handleSearch},r.a.createElement("div",{className:"SearchBar-fields"},r.a.createElement("div",null,r.a.createElement("input",{value:this.state.term,onChange:this.handleTermChange,placeholder:"Search Businesses"}),this.renderError(this.state.termError)),r.a.createElement("div",null,r.a.createElement("input",{value:this.state.location,onChange:this.handleLocationChange,placeholder:"Where?"}),this.renderError(this.state.locationError))),r.a.createElement("div",{className:"SearchBar-submit"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-lg"},"Let's Go")))))}}]),t}(n.Component),S=Object(p.b)(function(e){return{sortBy:e.sortBy,searchSuccess:e.searchSuccess}},function(e){return{setSearchTerm:function(t){return e(function(e){return{type:f,payload:{term:e}}}(t))},setSearchLocation:function(t){return e(function(e){return{type:E,payload:{location:e}}}(t))},setSearchSortBy:function(t){return e(function(e){return{type:v,payload:{sortBy:e}}}(t))}}})(g),y=(a(33),Object(p.b)(function(e){return{searchSuccess:e.searchSuccess,total:e.total,offset:e.offset,term:e.term,location:e.location,sortBy:e.sortBy}})(function(e){var t,a=e.total,n=e.term,s=e.sortBy,c=e.location,o=e.offset,i=e.pageIndexHigh,l=e.searchSuccess;return!0===l?r.a.createElement("div",{className:"ResultsHeader"},r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement("span",null,"".concat((t=s,"rating"===t?"Best ":"")," ").concat(n))," in ".concat(c)),r.a.createElement("p",{className:"results-count"},"Showing ",(o||0)+1,"-",i," of ",a)))):!1===l?r.a.createElement("div",{className:"ResultsHeader"},r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement("span",null,"No results for ",n)," in ",c)))):null})),O=(a(34),a(35),function(e){var t=e.business,a={backgroundImage:"url(".concat(t.imageSrc,")")};return r.a.createElement("div",{className:"Business"},r.a.createElement("div",{className:"Business-img",style:a}),r.a.createElement("div",{className:"Business-address"},r.a.createElement("h2",null,t.name),r.a.createElement("p",null,t.address),r.a.createElement("p",null,t.city,", ",t.state),r.a.createElement("p",null,t.zipCode)),r.a.createElement("div",{className:"Business-category"},r.a.createElement("p",null,t.category)),r.a.createElement("div",{className:"Business-footer"},r.a.createElement("p",{className:"Business-rating"},t.rating," stars"),r.a.createElement("p",{className:"Business-reviews"},t.reviewCount," reviews")))}),B=function(e){var t=e.businesses;return r.a.createElement("div",{className:"BusinessList container"},r.a.createElement("div",{className:"card-deck"},t.map(function(e){return r.a.createElement(O,{key:e.id,business:e})})))},C=function(e){var t=e.total,a=e.page;if(t){var n=a,s=Math.ceil(t/21);return r.a.createElement("div",{className:"PageCount"},"Page ",n," of ",s)}return null},_=a(21),N=a.n(_),w=(a(39),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a.handlePageClick=a.handlePageClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handlePageClick",value:function(e){var t=this,a=e.selected,n=Math.ceil(a*this.props.perPage);this.setState({offset:n,selected:a},function(){window.scrollTo(0,469),t.props.searchYelp(t.props.term,t.props.location,t.props.sortBy,n)})}},{key:"render",value:function(){var e=this.props,t=e.total,a=e.perPage,n=e.offset,s=this.state.selected;if(t){var c={};return n||(c.forcePage=0),r.a.createElement("div",{className:"Pagination container"},r.a.createElement(C,{page:s?s+1:1,total:t}),r.a.createElement(N.a,Object.assign({previousLabel:"\xab",nextLabel:"\xbb",breakLabel:"...",breakClassName:"break-me",pageCount:Math.ceil(t/a),marginPagesDisplayed:1,pageRangeDisplayed:2,onPageChange:this.handlePageClick,containerClassName:"Pagination-buttons",hrefBuilder:function(){return"#"},activeClassName:"active"},c)))}return null}}]),t}(n.Component)),k=Object(p.b)(function(e){return{term:e.term,location:e.location,sortBy:e.sortBy,total:e.total}})(w);a(18).config();var j={search:function(e,t,a,n){return fetch("https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(t,"&sort_by=").concat(a,"&limit=").concat(21,"&offset=").concat(n||""),{headers:{Authorization:"Bearer ".concat("OCVacTTeQhlwBdJk-nGMTauynCrZlD7dworJfZv5nQ5AxsYRRwgXg0vaW6tg5raxQ_2ROLJxNUZcf-EgtPobeegg6g_bdFZ7Gw0aFOnb51zhVIVeHlvMmD_RnZEGXXYx")}}).then(function(e){if(e.ok)return e.json()}).then(function(e){if(e&&e.businesses)return{total:e.total,businessList:e.businesses.map(function(e){return{id:e.id,imageSrc:e.image_url,name:e.name,address:e.location.address1,city:e.location.city,state:e.location.state,zipCode:e.location.zip_code,category:e.categories[0].title,rating:e.rating,reviewCount:e.review_count}})}})}};a(42);a(18).config();var R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},a.searchYelp=a.searchYelp.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"searchYelp",value:function(e,t,a,n){var r=this;j.search(e,t,a,n).then(function(e){e?r.props.setSearchResults(e.total,e.businessList,n,!0):r.props.setSearchResults(0,[],0,!1)})}},{key:"render",value:function(){var e=this.props,t=e.businesses,a=e.offset;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d,null),r.a.createElement(S,{searchYelp:this.searchYelp}),r.a.createElement(y,{pageIndexHigh:(a||0)+t.length}),r.a.createElement(B,{businesses:t}),r.a.createElement(k,{perPage:21,searchYelp:this.searchYelp,offset:a}))}}]),t}(n.Component),T=Object(p.b)(function(e){return{total:e.total,businesses:e.businesses,offset:e.offset,searchSuccess:e.searchSuccess}},function(e){return{setSearchResults:function(t,a,n,r){return e(function(e,t,a,n){return{type:b,payload:{total:e,businesses:t,offset:a},searchSuccess:n}}(t,a,n,r))}}})(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(43);var L=a(12),P=a(10),H="SET_SEARCH_TERM",Y="SET_SEARCH_LOCATION",A="SET_SEARCH_SORT_BY",M="SET_SEARCH_RESULTS",D={term:"",location:"",sortBy:"best_match",businesses:[]},I=function(e,t){switch(e=e||D,t.type){case H:return Object(P.a)({},e,{term:t.payload.term});case Y:return Object(P.a)({},e,{location:t.payload.location});case A:return Object(P.a)({},e,{sortBy:t.payload.sortBy});case M:return Object(P.a)({},e,{total:t.payload.total,businesses:t.payload.businesses,offset:t.payload.offset,searchSuccess:t.searchSuccess});default:return e}},x=Object(L.b)(I,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(r.a.createElement(p.a,{store:x},r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.5332f15a.chunk.js.map